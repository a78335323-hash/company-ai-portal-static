<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Gestione personale AI</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: white;
}

.login {
    background: white;
    width: 500px;
    padding: 45px;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    text-align: center;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#logo {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 90px;
}

select, input {
    width: 100%;
    padding: 14px;
    margin-bottom: 18px;
    border-radius: 8px;
    border: 1px solid #ccc;
    text-align: center;
    font-size: 14px;
    box-sizing: border-box;
}

button {
    width: 55%;
    padding: 12px;
    border-radius: 8px;
    border: none;
    color: white;
    font-size: 16px;
    cursor: pointer;
    margin-top: 10px;
}

.forgot {
    font-size: 12px;
    color: #2980b9;
    cursor: pointer;
    margin-bottom: 20px;
    text-align: center;
}

.rememberBox {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: 8px;
    margin-bottom: 18px;
    font-size: 13px;
    white-space: nowrap;
}

.password-wrapper {
    position: relative;
    width: 100%;
}

.togglePassword {
    position: absolute;
    right: 10px;
    top: 35%;
    transform: translateY(-50%);
    cursor: pointer;
    font-size: 18px;
    color: #555;
    user-select: none;
    width: 32px;
    height: 32px;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 1px solid #ccc;
    border-radius: 6px;
    background: white;
}
</style>
</head>

<body>

<div class="login">
    <img id="logo" src="logo.png">

    <h2>Gestione personale AI</h2>

    <!-- AZIENDA -->
    <select id="company">
        <option value="Lucagri">Lucagri</option>
        <option value="Agrichampion">Agrichampion</option>
    </select>

    <!-- EMAIL -->
    <input type="email" id="email" placeholder="Il tuo indirizzo email">

    <!-- PASSWORD CON OCCHIO -->
    <div class="password-wrapper">
        <input type="password" id="password" placeholder="La tua password">
        <span class="togglePassword" id="togglePassword">üëÅÔ∏è</span>
    </div>

    <!-- MEMORIZZA -->
    <div class="rememberBox">
        <input type="checkbox" id="remember">
        <label for="remember">memorizza dati di accesso</label>
    </div>

    <div class="forgot" onclick="location.href='forgot.html'">
        Hai dimenticato la password?
    </div>

    <button id="login">Accedi</button>
</div>

<script>
function applyTheme(company) {
    const body = document.body;
    const logo = document.getElementById("logo");
    const btn = document.getElementById("login");

    if (company === "Lucagri") {
        body.style.background = "#e0f2e9";
        btn.style.background = "#2ecc71";
        logo.src = "logo.png";
    }
    else if (company === "Agrichampion") {
        body.style.background = "#fff3e0";
        btn.style.background = "#f39c12";
        logo.src = "logo2.png";
    }
}

window.addEventListener("DOMContentLoaded", () => {
    const companySelect = document.getElementById("company");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const remember = document.getElementById("remember");
    const loginBtn = document.getElementById("login");
    const togglePassword = document.getElementById("togglePassword");

    // ripristino azienda
    const savedCompany = localStorage.getItem("company") || "Lucagri";
    companySelect.value = savedCompany;
    applyTheme(savedCompany);

    // ripristino credenziali se salvate
    if (localStorage.getItem("remember") === "true") {
        remember.checked = true;
        emailInput.value = localStorage.getItem("savedEmail") || "";
        passwordInput.value = localStorage.getItem("savedPassword") || "";
    }

    // cambio tema al cambio azienda
    companySelect.addEventListener("change", () => {
        localStorage.setItem("company", companySelect.value);
        applyTheme(companySelect.value);
    });

    // mostra / nascondi password con icona occhio
    togglePassword.addEventListener("click", () => {
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            togglePassword.textContent = "üôà";
        } else {
            passwordInput.type = "password";
            togglePassword.textContent = "üëÅÔ∏è";
        }
    });

    // login
    loginBtn.addEventListener("click", () => {
        if (!emailInput.value) {
            alert("Inserisci l'email");
            return;
        }
        if (!passwordInput.value) {
            alert("Inserisci la password");
            return;
        }

        // salva azienda sempre
        localStorage.setItem("company", companySelect.value);

        // memorizza credenziali solo se spuntato
        if (remember.checked) {
            localStorage.setItem("remember", "true");
            localStorage.setItem("savedEmail", emailInput.value);
            localStorage.setItem("savedPassword", passwordInput.value);
        } else {
            localStorage.removeItem("remember");
            localStorage.removeItem("savedEmail");
            localStorage.removeItem("savedPassword");
        }

        // usa email come identificativo utente
        localStorage.setItem("user", emailInput.value);

        location.href = "portal.html";
    });
});
</script>

</body>
</html>
